<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para el Amor de Mi Vida</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Montserrat:wght@300;400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            color: #fff;
            overflow: hidden;
            background: #000;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #slideshow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        #photo-slideshow {
            max-width: 90%;
            max-height: 90vh;
            object-fit: contain;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        #photo-slideshow.active {
            opacity: 1;
        }
        
        #photo-slideshow.zoomed {
            transform: scale(1.1);
            transition: transform 0.5s ease-in-out;
        }
        
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
        }
        
        .quote-container {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            padding: 1.5rem 2.5rem;
            border-radius: 50px;
            max-width: 90%;
            text-align: center;
            animation: fadeIn 2s ease-in-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .quote {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            pointer-events: none;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0;
            user-select: none;
        }
        
        .heart {
            position: absolute;
            font-size: 20px;
            color: #ff69b4;
            animation: float 4s linear forwards;
        }
        
        .light {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ff69b4;
            animation: blink 2s linear infinite;
        }
        
        /* Estilos para elementos decorativos */
        .decoration {
            position: absolute;
            pointer-events: none;
            z-index: 5;
            animation: float 8s ease-in-out infinite;
            opacity: 0;
            transform-origin: center;
        }
        
        /* Corazones */
        .heart {
            color: #ff69b4;
            text-shadow: 0 0 10px rgba(255, 105, 180, 0.7);
            animation: floatHeart 6s ease-in-out infinite, pulse 2s infinite;
        }
        
        /* Flores */
        .decoration.flower {
            position: fixed;
            font-size: 30px;
            pointer-events: none;
            z-index: 5;
            opacity: 0;
            animation: floatUp 8s ease-in-out forwards, 
                       fadeIn 1s ease-out forwards,
                       swing 4s ease-in-out infinite;
            transform-origin: center bottom;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
        }
        
        @keyframes floatUp {
            0% { 
                transform: translateY(0) rotate(0deg) scale(0.8);
                opacity: 0.8;
            }
            100% { 
                transform: translateY(-100vh) rotate(360deg) scale(1.2);
                opacity: 0;
            }
        }
        
        @keyframes swing {
            0%, 100% { transform: translateX(0px) rotate(-5deg); }
            50% { transform: translateX(10px) rotate(5deg); }
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; }
            20% { opacity: 0.9; }
            80% { opacity: 0.9; }
            100% { opacity: 0; }
        }
        
        /* Regalos */
        .gift {
            font-size: 28px;
            animation: bounce 2s ease infinite, float 10s ease-in-out infinite;
        }
        
        /* Estrellas */
        .star {
            color: #ffd700;
            text-shadow: 0 0 10px #ffd700;
            animation: twinkle 3s infinite, float 15s ease-in-out infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) scale(0.5) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) scale(1) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyframes blink {
            0% {
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }
        
        /* Nuevas animaciones */
        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.1); }
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(5deg); }
        }
        
        @keyframes floatHeart {
            0% { transform: translateY(0) scale(1); opacity: 0; }
            20% { opacity: 0.9; }
            80% { opacity: 0.9; }
            100% { transform: translateY(-200px) scale(1.5); opacity: 0; }
        }
        
        /* Estilos para el indicador de carga */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease-out;
        }
        
        .loader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ff69b4;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }
        
        .loader-text {
            color: white;
            font-size: 1.2rem;
            margin-top: 15px;
            text-align: center;
        }
        
        .loader-progress {
            width: 80%;
            max-width: 300px;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .loader-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff69b4, #ff8fab);
            transition: width 0.3s ease;
            border-radius: 5px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            #photo-slideshow {
                max-width: 95%;
            }
            
            .quote {
                font-size: 1.5rem;
                white-space: normal;
            }
            
            .quote-container {
                padding: 1rem 1.5rem;
                border-radius: 25px;
            }
        }
        
        /* Estilos para flores grandes */
        .big-flower {
            position: fixed;
            font-size: 120px;
            opacity: 0;
            pointer-events: none;
            z-index: 10;
            animation: floatBigFlower 20s linear infinite;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.7));
        }

        @keyframes floatBigFlower {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.8);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) scale(1.2);
                opacity: 0;
            }
        }

        /* Mejoras en las partículas */
        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            z-index: 5;
            animation: floatParticle 15s linear infinite;
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Mejoras en el contenedor de citas */
        .quote-container {
            background: linear-gradient(135deg, rgba(255, 182, 193, 0.3), rgba(255, 192, 203, 0.2));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
            transition: all 0.5s ease;
        }

        .quote {
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            transition: all 0.5s ease;
        }

        /* Efecto de brillo en el texto */
        @keyframes textGlow {
            0%, 100% { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #e60073, 0 0 20px #e60073; }
            50% { text-shadow: 0 0 10px #fff, 0 0 20px #ff4da6, 0 0 30px #ff4da6, 0 0 40px #ff4da6; }
        }
    </style>
</head>
<body>
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
        <div class="loader-text" id="loader-text">Cargando recuerdos especiales...</div>
        <div class="loader-progress">
            <div class="loader-progress-bar" id="loader-progress"></div>
        </div>
    </div>
    
    <div id="slideshow-container">
        <img id="photo-slideshow" style="opacity: 0;" alt="Nuestros momentos">
        <div class="overlay"></div>
    </div>
    
    <div class="particles" id="particles"></div>
    
    <div class="quote-container">
        <div class="quote" id="quote">Cargando momentos especiales...</div>
    </div>
    
    <div id="lights-container"></div>
    
    <!-- Reproductor de música oculto -->
    <audio id="bgMusic" loop>
        <source src="rosas.mp3" type="audio/mp3">
        Tu navegador no soporta el elemento de audio.
    </audio>
    
    <script>
        // Configuración
        const config = {
            slideDuration: 8000, // 8 segundos por foto
            // Orden personalizado de las imágenes
            imageOrder: [
                1, 32, 2, 30, 3, 29, 4, 28, 5, 26, 
                6, 25, 7, 24, 8, 23, 9, 22, 10, 21,
                11, 20, 12, 19, 13, 18, 14, 15, 16, 17
            ],
            quotes: [
                "Eres mi persona favorita en todo el mundo",
                "Cada día a tu lado es un regalo",
                "Tu sonrisa es mi mayor alegría",
                "Eres la razón por la que sonrío cada mañana",
                "Contigo hasta el fin del mundo",
                "Eres mi sueño hecho realidad",
                "Mi corazón late por ti",
                "Eres la mejor parte de mi vida",
                "Contigo todo es mejor",
                "Eres mi todo"
            ],
            currentIndex: 0,
            isPlaying: true,
            zoomEnabled: true
        };

        // Elementos del DOM
        const slideshow = document.getElementById('photo-slideshow');
        const quoteElement = document.getElementById('quote');
        const particlesContainer = document.getElementById('particles');
        const lightsContainer = document.getElementById('lights-container');
        const loader = document.getElementById('loader');
        const loaderText = document.getElementById('loader-text');
        const loaderProgress = document.getElementById('loader-progress');
        
        // Cargar imágenes
        const images = [];
        let slideInterval;
        let zoomInterval;
        
        // Precargar imágenes con manejo de errores
        function preloadImages() {
            return new Promise((resolve, reject) => {
                let loaded = 0;
                const total = config.imageOrder.length;
                const errors = [];
                
                if (total === 0) {
                    reject(new Error("No hay imágenes para cargar"));
                    return;
                }
                
                const updateProgress = () => {
                    const progress = Math.round((loaded / total) * 100);
                    loaderText.textContent = `Cargando recuerdos... ${progress}%`;
                    loaderProgress.style.width = `${progress}%`;
                };
                
                const checkComplete = () => {
                    if (loaded + errors.length === total) {
                        if (errors.length > 0) {
                            console.warn(`No se pudieron cargar ${errors.length} imágenes`);
                            if (loaded === 0) {
                                reject(new Error("No se pudo cargar ninguna imagen"));
                                return;
                            }
                        }
                        resolve();
                    }
                };
                
                config.imageOrder.forEach((imgNumber) => {
                    const img = new Image();
                    const imgName = imgNumber <= 15 ? `${imgNumber}.jpg` : `${imgNumber}.jpeg`;
                    
                    img.onload = () => {
                        loaded++;
                        updateProgress();
                        checkComplete();
                    };
                    
                    img.onerror = () => {
                        console.error(`Error al cargar la imagen: ${imgName}`);
                        errors.push(imgName);
                        updateProgress();
                        checkComplete();
                    };
                    
                    // Forzar recarga de la caché
                    img.src = `${imgName}?v=${Date.now()}`;
                    
                    if (img.complete) {
                        img.onload = null;
                        img.onerror = null;
                        loaded++;
                        updateProgress();
                        checkComplete();
                    }
                    
                    images.push({
                        element: img,
                        number: imgNumber,
                        loaded: false
                    });
                });
                
                // Timeout de seguridad
                setTimeout(() => {
                    if (loaded + errors.length < total) {
                        const remaining = total - (loaded + errors.length);
                        console.warn(`Tiempo de espera agotado. ${remaining} imágenes no respondieron.`);
                        loaded = total - errors.length;
                        checkComplete();
                    }
                }, 30000); // 30 segundos de timeout
            });
        }
        
        // Ocultar el loader con transición
        function hideLoader() {
            loader.style.opacity = '0';
            setTimeout(() => {
                loader.classList.add('hidden');
                // Iniciar la presentación
                startSlideshow();
            }, 1000);
        }
        
        // Efecto de máquina de escribir
        async function typeWriter(text, element) {
            element.textContent = '';
            element.classList.add('typewriter');
            
            for (let i = 0; i < text.length; i++) {
                element.textContent += text.charAt(i);
                await new Promise(resolve => setTimeout(resolve, 30));
            }
            
            element.classList.remove('typewriter');
        }
        
        // Crear corazones flotantes
        function createHearts() {
            const heart = document.createElement('div');
            heart.innerHTML = '❤️';
            heart.className = 'heart';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
            heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
            heart.style.animationDelay = (Math.random() * 2) + 's';
            document.body.appendChild(heart);
            
            // Eliminar el corazón después de la animación
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.remove();
                }
            }, 6000);
        }
        
        // Crear luces parpadeantes
        function createLights() {
            const colors = ['#ff69b4', '#ffb6c1', '#ff1493', '#ffc0cb'];
            const light = document.createElement('div');
            light.className = 'light';
            light.style.background = colors[Math.floor(Math.random() * colors.length)];
            light.style.left = Math.random() * 100 + 'vw';
            light.style.top = Math.random() * 100 + 'vh';
            light.style.animationDelay = Math.random() * 5 + 's';
            light.style.animationDuration = (Math.random() * 5 + 5) + 's';
            lightsContainer.appendChild(light);
            
            // Eliminar la luz después de la animación
            setTimeout(() => {
                if (light.parentNode) {
                    light.remove();
                }
            }, 10000);
        }
        
        // Efecto de zoom suave
        function startZoomEffect() {
            if (!config.zoomEnabled) return;
            
            slideshow.classList.toggle('zoomed');
            
            zoomInterval = setTimeout(() => {
                if (config.isPlaying) {
                    startZoomEffect();
                }
            }, 15000); // Cambia la dirección del zoom cada 15 segundos
        }
        
        // Mostrar imagen actual
        async function showImage(index) {
            clearInterval(slideInterval);
            clearTimeout(zoomInterval);
            
            // Asegurarse de que el índice esté dentro de los límites
            config.currentIndex = (index + images.length) % images.length;
            const currentImage = images[config.currentIndex];
            
            // Transición de cambio de imagen
            slideshow.style.opacity = '0';
            
            await new Promise(resolve => setTimeout(resolve, 800));
            
            // Cambiar la imagen
            slideshow.src = currentImage.element.src;
            slideshow.alt = `Foto ${currentImage.number}`;
            slideshow.style.opacity = '1';
            
            // Iniciar efecto de zoom
            startZoomEffect();
            
            // Mostrar cita
            showRandomQuote();
            
            // Crear efectos visuales
            createParticles();
            createHearts();
            createLights();
            
            // Crear más efectos aleatorios
            if (Math.random() > 0.7) createHearts();
            if (Math.random() > 0.8) createLights();
            
            // Pasar a la siguiente imagen después del tiempo configurado
            if (config.isPlaying) {
                slideInterval = setInterval(() => {
                    showImage(config.currentIndex + 1);
                }, config.slideDuration);
            }
        }
        
        // Mostrar cita aleatoria con efecto de máquina de escribir
        async function showRandomQuote() {
            const randomQuote = config.quotes[Math.floor(Math.random() * config.quotes.length)];
            await typeWriter(randomQuote, quoteElement);
        }
        
        // Crear partículas
        function createParticles() {
            // Limpiar partículas anteriores
            particlesContainer.innerHTML = '';
            
            // Crear nuevas partículas
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + 'vw';
                    particle.style.top = Math.random() * 100 + 'vh';
                    particle.style.width = (Math.random() * 10 + 5) + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.animationDelay = (Math.random() * 5) + 's';
                    particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                    particlesContainer.appendChild(particle);
                }, i * 100);
            }
        }
        
        // Elementos decorativos
        const decorations = {
            hearts: ['❤️', '💖', '💗', '💓', '💕', '💘', '💝', '💞', '💟', '❣️'],
            flowers: ['🌸', '🌹', '🌺', '🌻', '🌼', '🌷', '💐', '🏵️'],
            gifts: ['🎁', '🎀', '🎊', '🎉', '🎈', '✨', '🎇', '🎆'],
            stars: ['⭐', '🌟', '💫', '✨', '☄️', '🌠']
        };
        
        // Crear elementos decorativos
        function createDecoration(type, count = 1) {
            const types = {
                'heart': {
                    elements: decorations.hearts,
                    className: 'heart',
                    size: () => Math.random() * 30 + 20, // 20-50px
                    duration: () => Math.random() * 4 + 4, // 4-8s
                    delay: () => Math.random() * 5 // 0-5s
                },
                'flower': {
                    elements: decorations.flowers,
                    className: 'flower',
                    size: () => Math.random() * 25 + 15, // 15-40px
                    duration: () => Math.random() * 6 + 8, // 8-14s
                    delay: () => Math.random() * 3 // 0-3s
                },
                'gift': {
                    elements: decorations.gifts,
                    className: 'gift',
                    size: () => Math.random() * 35 + 25, // 25-60px
                    duration: () => Math.random() * 5 + 10, // 10-15s
                    delay: () => Math.random() * 4 // 0-4s
                },
                'star': {
                    elements: decorations.stars,
                    className: 'star',
                    size: () => Math.random() * 20 + 15, // 15-35px
                    duration: () => Math.random() * 3 + 5, // 5-8s
                    delay: () => Math.random() * 2 // 0-2s
                }
            };
            
            const config = types[type] || types['heart'];
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const element = document.createElement('div');
                    const randomElement = config.elements[Math.floor(Math.random() * config.elements.length)];
                    const size = config.size();
                    const duration = config.duration();
                    const delay = config.delay();
                    
                    element.className = `decoration ${config.className}`;
                    element.textContent = randomElement;
                    element.style.left = Math.random() * 100 + 'vw';
                    element.style.top = '100vh';
                    element.style.fontSize = `${size}px`;
                    element.style.animationDuration = `${duration}s`;
                    element.style.animationDelay = `${delay}s`;
                    
                    document.body.appendChild(element);
                    
                    // Eliminar el elemento después de la animación
                    setTimeout(() => {
                        if (element.parentNode) {
                            element.remove();
                        }
                    }, (duration + delay) * 1000);
                    
                }, Math.random() * 2000); // Escalonar la creación
            }
        }
        
        // Crear múltiples decoraciones aleatorias
        function createRandomDecorations() {
            const types = ['heart', 'flower', 'gift', 'star'];
            const randomType = types[Math.floor(Math.random() * types.length)];
            const count = Math.floor(Math.random() * 3) + 1; // 1-3 elementos
            
            createDecoration(randomType, count);
            
            // Programar la próxima creación
            const nextTime = Math.random() * 1000 + 500; // 0.5-1.5 segundos
            setTimeout(createRandomDecorations, nextTime);
        }
        
        // Iniciar el efecto de decoraciones
        function startDecorations() {
            // Crear decoraciones iniciales
            createDecoration('heart', 3);
            createDecoration('flower', 2);
            createDecoration('gift', 1);
            createDecoration('star', 2);
            
            // Iniciar el generador aleatorio después de un tiempo
            setTimeout(createRandomDecorations, 3000);
        }
        
        // Iniciar el slideshow
        async function startSlideshow() {
            // Mostrar mensaje de bienvenida
            await typeWriter("Bienvenida a nuestro álbum de recuerdos", quoteElement);
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Iniciar la presentación
            showImage(0);
            createParticles();
            
            // Crear luces iniciales
            for (let i = 0; i < 5; i++) {
                setTimeout(createLights, i * 1000);
            }
            
            // Crear corazones periódicamente
            setInterval(createHearts, 3000);
            
            // Crear luces periódicamente
            setInterval(createLights, 4000);
            
            // Iniciar decoraciones
            startDecorations();
            
            // Crear más decoraciones periódicamente
            setInterval(() => {
                const types = ['heart', 'flower', 'gift', 'star'];
                const randomType = types[Math.floor(Math.random() * types.length)];
                createDecoration(randomType, Math.floor(Math.random() * 3) + 1);
            }, 2000);
        }
        
        // Pausar/reanudar con la barra espaciadora
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                config.isPlaying = !config.isPlaying;
                if (config.isPlaying) {
                    showImage(config.currentIndex);
                } else {
                    clearInterval(slideInterval);
                    clearTimeout(zoomInterval);
                }
            }
        });
        
        // Inicialización mejorada
        async function init() {
            try {
                // Mostrar loader
                loader.style.opacity = '1';
                loader.classList.remove('hidden');
                
                // Precargar imágenes
                await preloadImages();
                
                // Configurar el inicio de la presentación
                const startPresentation = () => {
                    const audio = document.getElementById('bgMusic');
                    audio.volume = 0.5;
                    audio.play().catch(e => {
                        console.log("No se pudo reproducir el audio automáticamente:", e);
                        // Continuar sin audio
                        hideLoader();
                    });
                    
                    // Reproducir audio cuando el usuario interactúe
                    const handleUserInteraction = () => {
                        audio.play().then(() => {
                            hideLoader();
                        }).catch(e => {
                            console.log("El usuario no permitió la reproducción de audio");
                            hideLoader();
                        });
                        // Eliminar listeners después del primer intento
                        document.removeEventListener('click', handleUserInteraction);
                        document.removeEventListener('touchstart', handleUserInteraction);
                    };
                    
                    // Si el audio no se pudo reproducir, esperar interacción
                    audio.addEventListener('play', hideLoader, { once: true });
                    
                    // Si hay un error de reproducción, esperar interacción
                    if (audio.paused) {
                        document.addEventListener('click', handleUserInteraction, { once: true });
                        document.addEventListener('touchstart', handleUserInteraction, { once: true });
                    }
                };
                
                // Iniciar con interacción del usuario
                const startWithInteraction = () => {
                    document.removeEventListener('click', startWithInteraction);
                    document.removeEventListener('touchstart', startWithInteraction);
                    startPresentation();
                };
                
                document.addEventListener('click', startWithInteraction, { once: true });
                document.addEventListener('touchstart', startWithInteraction, { once: true });
                
                // Si no hay interacción después de 3 segundos, intentar iniciar de todos modos
                setTimeout(() => {
                    if (loader && !loader.classList.contains('hidden')) {
                        startPresentation();
                    }
                }, 3000);
                
            } catch (error) {
                console.error("Error al inicializar la presentación:", error);
                loaderText.textContent = "¡Ups! Algo salió mal. Por favor, recarga la página.";
                loaderProgress.style.width = "100%";
                loaderProgress.style.background = "#ff4d4d";
            }
        }
        
        // Iniciar todo cuando el documento esté listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
